"use strict";(self.webpackChunklaghata_frontend=self.webpackChunklaghata_frontend||[]).push([[876],{3876:function(n,e,i){i.r(e);var t,r,a,o,s,d,l,p,c,u,x,h,m,f,g,b,w,v=i(168),Z=i(4942),j=i(4165),y=i(1413),k=i(5861),P=i(885),C=i(2791),S=i(1933),_=i(7691),z=i(6871),L=i(4798),q=i(4827),T=i(6742),B=i(2315),I=i(184),N=_.ZP.div(t||(t=(0,v.Z)(["\n  min-height: 100vh;\n  padding-bottom: 150px;\n  position: relative;\n\n  .spinner {\n    margin-top: 10rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),U=_.ZP.div(r||(r=(0,v.Z)(["\n  border: 1px solid;\n  width: fit-content;\n  padding: 10px;\n  border-radius: 5px;\n  background: #f5f0ed;\n  margin: 20px auto 0 auto;\n  font-weight: 500;\n"]))),V=_.ZP.div(a||(a=(0,v.Z)(["\n  width: 70%;\n  max-width: 1300px;\n  display: flex;\n  gap: 3rem;\n  align-items: flex-start;\n  justify-content: center;\n  margin: 2.5rem auto 0 auto;\n  padding: 5px 10px;\n\n  @media screen and (max-width: 1200px) {\n    flex-direction: column;\n    gap: 1rem;\n    width: 100%;\n    align-items: center;\n  }\n"]))),A=_.ZP.div(o||(o=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 150px;\n  gap: 1.5rem;\n  margin: 30px 0 40px 50px;\n\n  @media screen and (max-width: 700px) {\n    width: 80%;\n    margin: 30px auto;\n  }\n"]))),D=_.ZP.h2(s||(s=(0,v.Z)(["\n  font-size: 30px;\n  font-weight: 500;\n  text-transform: capitalize;\n"]))),E=_.ZP.p(d||(d=(0,v.Z)(["\n  font-size: 20px;\n"]))),F=_.ZP.img(l||(l=(0,v.Z)(["\n  border-radius: 50%;\n  margin-top: 30px;\n  width: 190px;\n  height: 190px;\n  object-fit: cover;\n\n  @media screen and (max-width: 700px) {\n    width: 130px;\n    height: 130px;\n  }\n"]))),O=_.ZP.div(p||(p=(0,v.Z)(["\n  border-radius: 10px;\n  border: 1px solid;\n  height: fit-content;\n  margin-bottom: 15px;\n  margin-top: 25px;\n  display: flex;\n  align-items: center;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  flex-direction: column;\n  gap: 1.5rem;\n  width: 80%;\n\n  form {\n    width: 80%;\n    margin: 0 auto;\n  }\n\n  .spinnerPicture,\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .spinnerPicture {\n    margin-top: 20px;\n  }\n\n  .disabledBtn {\n    padding: 12px 15px;\n    border: 1px solid white;\n    border-radius: 25px;\n    font-size: 18px;\n    transition: all 0.7s ease-in-out;\n    margin: 25px 0;\n    width: 100%;\n    color: black;\n  }\n\n  @media screen and (min-width: 700px) {\n    max-width: 400px;\n  }\n"]))),H=_.ZP.h3(c||(c=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 15px 0;\n  font-size: 30px;\n  margin: 20px 0;\n"]))),J=_.ZP.div(u||(u=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1.5rem;\n"]))),Q=_.ZP.input(x||(x=(0,v.Z)(["\n  padding: 12px 10px;\n  border-radius: 10px;\n  outline: none;\n  font-size: 17px;\n  border: 1px solid black;\n"]))),Y=_.ZP.button(h||(h=(0,v.Z)(["\n  padding: 12px 15px;\n  color: white;\n  background: black;\n  border: 1px solid white;\n  border-radius: 25px;\n  font-size: 18px;\n  transition: all 0.7s ease-in-out;\n  margin: 25px 0;\n  width: 100%;\n  cursor: pointer;\n\n  :hover {\n    background: transparent;\n    color: black;\n    border: 1px solid black;\n  }\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),G=_.ZP.input(m||(m=(0,v.Z)(["\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),K=_.ZP.label(f||(f=(0,v.Z)(["\n  font-size: 1.25em;\n  font-weight: 500;\n  color: black;\n  border: 1px solid;\n  background-color: transparent;\n  padding: 10px 15px;\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 25px;\n  transition: all 0.5s ease-in-out;\n\n  :hover {\n    background-color: black;\n    color: white;\n  }\n"]))),M=_.ZP.span(g||(g=(0,v.Z)(["\n  color: #cc0000;\n  padding-left: 10px;\n"]))),R=_.ZP.div(b||(b=(0,v.Z)(["\n  width: 100%;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid;\n  }\n"]))),W=_.ZP.img(w||(w=(0,v.Z)(["\n  height: 90px;\n  width: 90px;\n  object-fit: cover;\n  border-radius: 50%;\n"])));e.default=function(){var n=(0,C.useState)(!1),e=(0,P.Z)(n,2),i=e[0],t=e[1],r=(0,C.useState)({username:"",password:"",confirmPassword:"",email:"",picture:""}),a=(0,P.Z)(r,2),o=a[0],s=a[1],d=(0,C.useState)(!1),l=(0,P.Z)(d,2),p=l[0],c=l[1],u=(0,C.useState)(!1),x=(0,P.Z)(u,2),h=x[0],m=x[1],f=(0,z.s0)(),g=(0,q.a)(),b=(0,S.useQuery)(["userEmail",null===g||void 0===g?void 0:g._id],(function(){return(0,T.mr)(null===g||void 0===g?void 0:g._id)}),{staleTime:5e3,enabled:!(null===g||void 0===g||!g._id)}).data,w=function(){var n=(0,k.Z)((0,j.Z)().mark((function n(e){var i,t,r;return(0,j.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m(!0),"image/jpeg"!==e.type&&"image/png"!==e.type){n.next=23;break}return(i=new FormData).append("file",e),i.append("upload_preset","laghata-app"),i.append("cloud_name","laghata"),n.prev=6,n.next=9,fetch("".concat("https://api.cloudinary.com/v1_1/laghata/image/upload"),{method:"POST",body:i});case 9:return t=n.sent,n.next=12,t.json();case 12:r=n.sent,s((0,y.Z)((0,y.Z)({},o),{},{picture:r.secure_url.toString()})),m(!1),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(6),console.log(n.t0.stack),m(!1);case 21:n.next=24;break;case 23:m(!1);case 24:case"end":return n.stop()}}),n,null,[[6,17]])})));return function(e){return n.apply(this,arguments)}}(),v=function(n){s((function(e){return(0,y.Z)((0,y.Z)({},e),{},(0,Z.Z)({},n.target.name,n.target.value))}))};return(0,I.jsxs)(N,{children:[!(null!==g&&void 0!==g&&g.isVerified)&&(0,I.jsx)(U,{children:"You need to verify your email before making any changes"}),g&&b?(0,I.jsxs)(V,{children:[(0,I.jsxs)(A,{children:[g.picture?(0,I.jsx)(F,{src:g.picture,alt:"profile"}):(0,I.jsx)(F,{src:B,alt:"User profile picture"}),(0,I.jsxs)("div",{children:[(0,I.jsx)(D,{children:null===g||void 0===g?void 0:g.username}),(0,I.jsx)(E,{children:b})]})]}),(0,I.jsx)(O,{children:(0,I.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(!0);try{if(o.password.toLowerCase()!==o.confirmPassword.toLowerCase())return c(!0),void t(!1);var e={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(o)},i=function(){var n=(0,k.Z)((0,j.Z)().mark((function n(){var i,r,a;return(0,j.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===g||void 0===g||!g._id){n.next=8;break}return n.next=3,fetch("".concat("https://laghata-app.herokuapp.com","/api/user/").concat(null===g||void 0===g?void 0:g._id),e);case 3:return i=n.sent,n.next=6,i.json();case 6:(r=n.sent)&&(localStorage.setItem("token",null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.token),s({username:"",password:"",confirmPassword:"",email:"",picture:""}),t(!1),f("/"));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();i()}catch(r){console.log(r.stack),t(!1)}},children:[(0,I.jsx)(H,{children:"Update Info:"}),(0,I.jsxs)(J,{children:[(0,I.jsx)(Q,{type:"text",name:"username",placeholder:"Username",onChange:v,required:!0}),(0,I.jsx)(Q,{type:"password",name:"password",placeholder:"Password",onChange:v,required:!0}),(0,I.jsx)(Q,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:v,required:!0}),p&&(0,I.jsx)(M,{children:"Please check that your passwords match"}),(0,I.jsx)(Q,{type:"email",name:"email",placeholder:"Email",onChange:v,required:!0}),(0,I.jsx)(G,{type:"file",name:"file",id:"file",className:"inputfile",accept:"/image/*",onChange:function(n){w(n.target.files[0])}}),(0,I.jsx)(K,{htmlFor:"file",children:"Choose a picture"})]}),h?(0,I.jsx)(L.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinnerPicture",visible:!0}):o.picture&&(0,I.jsx)(R,{children:(0,I.jsx)(W,{src:o.picture,alt:"profile Picture"})}),null!==g&&void 0!==g&&g.isVerified?(0,I.jsx)(Y,{type:"submit",children:i?(0,I.jsx)(L.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0}):"Submit"}):(0,I.jsx)("button",{disabled:null===g||void 0===g?void 0:g.isVerified,className:"disabledBtn",children:"Submit"})]})})]}):(0,I.jsx)(L.p2,{height:"35",width:"35",color:"#010101",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0})]})}}}]);
//# sourceMappingURL=876.cd8ad5db.chunk.js.map