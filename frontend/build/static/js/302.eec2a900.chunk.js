"use strict";(self.webpackChunklaghata_frontend=self.webpackChunklaghata_frontend||[]).push([[302],{1302:function(n,e,t){t.r(e);var i,r,a,o,s,d,c,p,l,u,x,h,f,m,g,b,v,w,Z=t(168),j=t(4942),y=t(1413),k=t(4165),P=t(5861),C=t(885),S=t(2791),z=t(7691),_=t(6871),q=t(4798),L=t(4827),B=t(4448),F=t(184),I=z.ZP.div(i||(i=(0,Z.Z)(["\n  min-height: 100vh;\n  padding-bottom: 150px;\n  position: relative;\n"]))),N=z.ZP.div(r||(r=(0,Z.Z)(["\n  display: flex;\n"]))),T=z.ZP.div(a||(a=(0,Z.Z)(["\n  border: 1px solid;\n  width: 80%;\n  max-width: 900px;\n  padding: 10px;\n  border-radius: 5px;\n  background: #f5f0ed;\n  margin-top: 20px;\n  font-weight: 500;\n"]))),V=z.ZP.div(o||(o=(0,Z.Z)(["\n  max-width: 900px;\n  min-width: 400px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  padding: 5px 10px;\n"]))),A=z.ZP.div(s||(s=(0,Z.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 150px;\n  gap: 1.5rem;\n  margin: 30px 0 40px 50px;\n\n  @media screen and (max-width: 700px) {\n    width: 80%;\n    margin: 30px auto;\n  }\n"]))),D=z.ZP.h2(d||(d=(0,Z.Z)(["\n  font-size: 30px;\n  font-weight: 500;\n  text-transform: capitalize;\n"]))),E=z.ZP.p(c||(c=(0,Z.Z)(["\n  font-size: 20px;\n"]))),O=z.ZP.img(p||(p=(0,Z.Z)(["\n  border-radius: 50%;\n  margin-top: 30px;\n  width: 190px;\n  height: 190px;\n  object-fit: cover;\n\n  @media screen and (max-width: 700px) {\n    width: 130px;\n    height: 130px;\n  }\n"]))),U=z.ZP.div(l||(l=(0,Z.Z)(["\n  border-radius: 10px;\n  border: 1px solid;\n  width: 100%;\n  height: fit-content;\n  margin-bottom: 15px;\n  margin-top: 25px;\n  display: flex;\n  align-items: center;\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n  flex-direction: column;\n  gap: 1.5rem;\n\n  .spinnerPicture,\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .spinnerPicture {\n    margin-top: 20px;\n  }\n\n  .disabledBtn {\n    padding: 12px 15px;\n    border: 1px solid white;\n    border-radius: 25px;\n    font-size: 18px;\n    transition: all 0.7s ease-in-out;\n    margin: 25px 0;\n    width: 100%;\n    color: black;\n  }\n\n  @media screen and (max-width: 700px) {\n    width: 85%;\n  }\n"]))),H=z.ZP.h3(u||(u=(0,Z.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 15px 0;\n  font-size: 30px;\n  margin: 20px 0;\n"]))),J=z.ZP.div(x||(x=(0,Z.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1.5rem;\n  width: 350px;\n\n  @media screen and (max-width: 700px) {\n    width: 250px;\n  }\n"]))),Y=z.ZP.input(h||(h=(0,Z.Z)(["\n  padding: 12px 10px;\n  border-radius: 10px;\n  outline: none;\n  font-size: 17px;\n  border: 1px solid black;\n"]))),G=z.ZP.button(f||(f=(0,Z.Z)(["\n  padding: 12px 15px;\n  color: white;\n  background: black;\n  border: 1px solid white;\n  border-radius: 25px;\n  font-size: 18px;\n  transition: all 0.7s ease-in-out;\n  margin: 25px 0;\n  width: 100%;\n  cursor: pointer;\n\n  :hover {\n    background: transparent;\n    color: black;\n    border: 1px solid black;\n  }\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),K=z.ZP.input(m||(m=(0,Z.Z)(["\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n"]))),M=z.ZP.label(g||(g=(0,Z.Z)(["\n  font-size: 1.25em;\n  font-weight: 500;\n  color: black;\n  border: 1px solid;\n  background-color: transparent;\n  padding: 10px 15px;\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 25px;\n  transition: all 0.5s ease-in-out;\n\n  :hover {\n    background-color: black;\n    color: white;\n  }\n"]))),Q=z.ZP.span(b||(b=(0,Z.Z)(["\n  color: #cc0000;\n  padding-left: 10px;\n"]))),R=z.ZP.div(v||(v=(0,Z.Z)(["\n  width: 100%;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid;\n  }\n"]))),W=z.ZP.img(w||(w=(0,Z.Z)(["\n  height: 90px;\n  width: 90px;\n  object-fit: cover;\n  border-radius: 50%;\n"])));e.default=function(){var n=(0,S.useState)(),e=(0,C.Z)(n,2),t=e[0],i=e[1],r=(0,S.useState)(!1),a=(0,C.Z)(r,2),o=a[0],s=a[1],d=(0,S.useState)({username:"",password:"",confirmPassword:"",email:"",picture:""}),c=(0,C.Z)(d,2),p=c[0],l=c[1],u=(0,S.useState)(!1),x=(0,C.Z)(u,2),h=x[0],f=x[1],m=(0,S.useState)(!1),g=(0,C.Z)(m,2),b=g[0],v=g[1],w=(0,_.s0)(),Z=(0,L.a)();(0,S.useEffect)((function(){var n=function(){var n=(0,P.Z)((0,k.Z)().mark((function n(){var e,t;return(0,k.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(!0),n.prev=1,null===Z||void 0===Z||!Z._id){n.next=10;break}return n.next=5,fetch("".concat("https://laghata-app.herokuapp.com","/api/user/").concat(null===Z||void 0===Z?void 0:Z._id));case 5:return e=n.sent,n.next=8,e.json();case 8:(t=n.sent)?(i(t.data.email),s(!1)):s(!1);case 10:n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0.stack),s(!1);case 16:s(!1);case 17:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);var z=function(){var n=(0,P.Z)((0,k.Z)().mark((function n(e){var t,i,r;return(0,k.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v(!0),"image/jpeg"!==e.type&&"image/png"!==e.type){n.next=23;break}return(t=new FormData).append("file",e),t.append("upload_preset","laghata-app"),t.append("cloud_name","laghata"),n.prev=6,n.next=9,fetch("".concat("https://api.cloudinary.com/v1_1/laghata/image/upload"),{method:"POST",body:t});case 9:return i=n.sent,n.next=12,i.json();case 12:r=n.sent,l((0,y.Z)((0,y.Z)({},p),{},{picture:r.secure_url.toString()})),v(!1),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(6),console.log(n.t0.stack),v(!1);case 21:n.next=24;break;case 23:v(!1);case 24:case"end":return n.stop()}}),n,null,[[6,17]])})));return function(e){return n.apply(this,arguments)}}(),X=function(n){l((function(e){return(0,y.Z)((0,y.Z)({},e),{},(0,j.Z)({},n.target.name,n.target.value))}))};return(0,F.jsx)(I,{children:null!==Z&&void 0!==Z&&Z.username&&null!==Z&&void 0!==Z&&Z.picture&&t&&!o?(0,F.jsx)(N,{children:(0,F.jsxs)(V,{children:[!(null!==Z&&void 0!==Z&&Z.isVerified)&&(0,F.jsx)(T,{children:"You need to verify your email before making any changes"}),(0,F.jsxs)(A,{children:[Z.picture&&(0,F.jsx)(O,{src:Z.picture,alt:"profile"}),(0,F.jsxs)("div",{children:[(0,F.jsx)(D,{children:null===Z||void 0===Z?void 0:Z.username}),(0,F.jsx)(E,{children:t})]})]}),(0,F.jsx)(U,{children:(0,F.jsxs)("form",{onSubmit:function(n){n.preventDefault(),s(!0);try{if(p.password.toLowerCase()!==p.confirmPassword.toLowerCase())return f(!0),void s(!1);var e={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(p)},t=function(){var n=(0,P.Z)((0,k.Z)().mark((function n(){var t,i,r;return(0,k.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===Z||void 0===Z||!Z._id){n.next=8;break}return n.next=3,fetch("".concat("https://laghata-app.herokuapp.com","/api/user/").concat(null===Z||void 0===Z?void 0:Z._id),e);case 3:return t=n.sent,n.next=6,t.json();case 6:(i=n.sent)&&(localStorage.setItem("token",null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.token),l({username:"",password:"",confirmPassword:"",email:"",picture:""}),s(!1),w("/"));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();t()}catch(i){console.log(i.stack),s(!1)}},children:[(0,F.jsx)(H,{children:"Update Info:"}),(0,F.jsxs)(J,{children:[(0,F.jsx)(Y,{type:"text",name:"username",placeholder:"Username",onChange:X,required:!0}),(0,F.jsx)(Y,{type:"password",name:"password",placeholder:"Password",onChange:X,required:!0}),(0,F.jsx)(Y,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:X,required:!0}),h&&(0,F.jsx)(Q,{children:"Please check that your passwords match"}),(0,F.jsx)(Y,{type:"email",name:"email",placeholder:"Email",onChange:X,required:!0}),(0,F.jsx)(K,{type:"file",name:"file",id:"file",className:"inputfile",accept:"/image/*",onChange:function(n){z(n.target.files[0])}}),(0,F.jsx)(M,{htmlFor:"file",children:"Choose a picture"})]}),b?(0,F.jsx)(q.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinnerPicture",visible:!0}):p.picture&&(0,F.jsx)(R,{children:(0,F.jsx)(W,{src:p.picture,alt:"profile Picture"})}),null!==Z&&void 0!==Z&&Z.isVerified?(0,F.jsx)(G,{type:"submit",children:o?(0,F.jsx)(q.p2,{height:"30",width:"30",color:"#54cbe3",ariaLabel:"circles-loading",wrapperClass:"spinner",visible:!0}):"Submit"}):(0,F.jsx)("button",{disabled:null===Z||void 0===Z?void 0:Z.isVerified,className:"disabledBtn",children:"Submit"})]})})]})}):(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(B.Z,{})})})}}}]);
//# sourceMappingURL=302.eec2a900.chunk.js.map