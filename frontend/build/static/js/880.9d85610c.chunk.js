"use strict";(self.webpackChunklaghata_frontend=self.webpackChunklaghata_frontend||[]).push([[880],{5920:function(n,e,t){var r,i,a,s,o,c,d,p,u,l,x,h,f,g,m,v=t(168),Z=t(2982),b=t(4165),j=t(5861),w=t(885),y=t(2791),k=t(7691),P=t(3584),C=t(7692),I=t(6599),U=t(184),E=k.ZP.div(r||(r=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n"]))),S=k.ZP.div(i||(i=(0,v.Z)(["\n  width: 290px;\n  height: 400px;\n  border: 1px solid #000;\n  background-color: #f5f5f3;\n  border-radius: 10px;\n  transition: all 0.5s ease;\n\n  border: 1px solid;\n  z-index: 99999;\n  position: relative;\n"]))),_=k.ZP.div(a||(a=(0,v.Z)(["\n  height: 340px;\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  ::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: white;\n    border-radius: 50px;\n  }\n\n  ::-webkit-scrollbar-track {\n    background: #f5f0ed;\n    border-radius: 50px;\n    border-top-right-radius: 25px;\n    border-top-left-radius: 25px;\n  }\n"]))),z=k.ZP.div(s||(s=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 9px 10px;\n"]))),N=k.ZP.div(o||(o=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 7px;\n  padding-top: 13px;\n"]))),O=k.ZP.div(c||(c=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n"]))),M=k.ZP.div(d||(d=(0,v.Z)(["\n  /* max-height: 345px; */\n"]))),T=k.ZP.div(p||(p=(0,v.Z)(["\n  background-color: #fff;\n  width: fit-content;\n  border-radius: 25px;\n  padding: 10px 12px;\n  font-size: 15px;\n  font-weight: 400;\n"]))),D=k.ZP.div(u||(u=(0,v.Z)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  gap: 6px;\n  padding-top: 13px;\n"]))),R=k.ZP.div(l||(l=(0,v.Z)(["\n  background-color: #fff;\n  width: 80%;\n  border-radius: 25px;\n  padding: 10px 12px;\n  font-size: 15px;\n  font-weight: 400;\n"]))),A=k.ZP.img(x||(x=(0,v.Z)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n"]))),J=k.ZP.textarea(h||(h=(0,v.Z)(["\n  position: absolute;\n  bottom: 7px;\n  left: 5px;\n  padding-left: 9px;\n  padding-top: 10px;\n  width: 85%;\n  height: 40px;\n  outline: none;\n  border-radius: 25px;\n  border: 1px solid #000;\n  background-color: transparent;\n"]))),F=k.ZP.button(f||(f=(0,v.Z)(["\n  position: absolute;\n  bottom: 7px;\n  right: 5px;\n  height: 40px;\n  width: 10%;\n  border-radius: 50%;\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.5s ease;\n  border: 1px solid;\n\n  :hover {\n    border: none;\n    transform: scale(0.9);\n  }\n\n  .sendIcon {\n    font-size: 22px;\n    color: #242526;\n  }\n"]))),H=k.ZP.div(g||(g=(0,v.Z)(["\n  background: #000;\n  color: #f5f0ed;\n  padding: 7px 10px;\n  border-radius: 25px;\n  opacity: 0;\n  cursor: pointer;\n  transition: all 0.4s ease;\n  font-size: 15px;\n\n  :hover {\n    opacity: 1;\n  }\n"]))),K=k.ZP.button(m||(m=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 9px;\n  background-color: transparent;\n  border: none;\n  border-radius: 50%;\n  height: 80px;\n  cursor: pointer;\n  transition: all 0.33s ease;\n\n  :hover {\n    .msg-display {\n      opacity: 1;\n    }\n  }\n\n  img {\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n  }\n"])));e.Z=function(n){var e=n.picture,t=n.renterUsername,r=n.openChat,i=n.setOpenChat,a=n.currentUserName,s=n.currentUserPicture,o=n.currentUserId,c=n.renterId,d=(0,y.useState)(""),p=(0,w.Z)(d,2),u=p[0],l=p[1],x=(0,y.useContext)(I.p),h=x.currentChatMembers,f=x.setCurrentChatMembers,g=x.message,m=x.setMessage,v=x.chatConversation,k=x.setChatConversation,V=x.notification,q=x.setNotification,B=x.socket,G=(0,y.useRef)(),L=(0,y.useRef)(!1);(0,y.useEffect)((function(){if(!1===L.current){var n=function(){var n=(0,j.Z)((0,b.Z)().mark((function n(){var e,t,r;return(0,b.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:o,receiverId:c,createAt:Date.now()})},n.prev=1,n.next=4,fetch("".concat("https://laghata-app.herokuapp.com","/api/conversation"),e);case 4:return t=n.sent,n.next=7,t.json();case 7:201===(r=n.sent).status&&f(r.data),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0.stack);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){L.current=!0}}}),[o,c]),(0,y.useEffect)((function(){try{var n=function(){var n=(0,j.Z)((0,b.Z)().mark((function n(){var e,t,r;return(0,b.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://laghata-app.herokuapp.com","/api/conversation/").concat(o));case 2:return e=n.sent,n.next=5,e.json();case 5:(t=n.sent).data.length>0&&(r=t.data.find((function(n){return n.members[0]===o&&n.members[1]===c||n.members[1]===o&&n.members[0]===c})),f(r));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}catch(e){console.log(e.stack)}}),[]),(0,y.useEffect)((function(){B&&(B.emit("welcome-message",{currentUserName:a,renterUsername:t}),B.emit("initialisation-add-user",o),B.on("welcome-response",(function(n){l(n)})))}),[B,a,o]),(0,y.useEffect)((function(){var n=function(){var n=(0,j.Z)((0,b.Z)().mark((function n(){var e,t;return(0,b.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat("https://laghata-app.herokuapp.com","/api/messages/").concat(null===h||void 0===h?void 0:h._id));case 3:return e=n.sent,n.next=6,e.json();case 6:(t=n.sent).data.length>0&&k(t.data),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.stack);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();n()}),[h]),(0,y.useEffect)((function(){B&&B.on("getMessage",(function(n){var e,t;!0===(null===h||void 0===h||null===(e=h.members)||void 0===e?void 0:e.includes(n.senderId))&&!0===(null===h||void 0===h||null===(t=h.members)||void 0===t?void 0:t.includes(n.sendToId))?k([].concat((0,Z.Z)(v),[n])):r||V.includes(n)||q([].concat((0,Z.Z)(V),[n]))}))}),[B,v,V,r]);var Q=function(){var n=(0,j.Z)((0,b.Z)().mark((function n(e){var t,r;return(0,b.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),t={senderId:o,conversationId:null===h||void 0===h?void 0:h._id,receiverId:c,text:g,createAt:Date.now()},B.emit("sendMessage",t),m(""),n.prev=4,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n.next=8,fetch("".concat("https://laghata-app.herokuapp.com","/api/message"),r);case 8:n.sent.ok&&k([].concat((0,Z.Z)(v),[t])),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0.stack);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),W=(0,P.Z)((function(){i(!1)}));return(0,y.useEffect)((function(){var n;null===(n=G.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[v]),(0,U.jsxs)(E,{ref:W,children:[r&&(0,U.jsxs)(S,{children:[(0,U.jsxs)(_,{children:[0===v.length&&(0,U.jsxs)(D,{children:[(0,U.jsx)(A,{src:e,alt:"userProfile"}),(0,U.jsx)(R,{children:u.text})]}),(0,U.jsx)(M,{children:v.map((function(n,t){return(0,U.jsx)(z,{ref:G,children:n.senderId!==o&&n.senderId===c?(0,U.jsxs)(N,{children:[(0,U.jsx)(T,{children:n.text},t),(0,U.jsx)(A,{src:e,alt:"RenterProfile"})]}):n.senderId===o&&n.receiverId===c&&(0,U.jsxs)(O,{children:[(0,U.jsx)(A,{src:s,alt:"userProfile"}),(0,U.jsx)(T,{children:n.text})]})},t)}))})]}),(0,U.jsxs)("form",{onSubmit:Q,children:[(0,U.jsx)(J,{value:g,placeholder:"Message",onChange:function(n){return m(n.target.value)},onKeyDown:function(n){return"Enter"===n.key?Q(n):null}}),(0,U.jsx)(F,{type:"submit",children:(0,U.jsx)(C.PRb,{className:"sendIcon"})})]})]}),(0,U.jsxs)(K,{onClick:function(){i(!r)},children:[(0,U.jsxs)(H,{className:"msg-display",children:["Hey i'm ",t,"!"]}),(0,U.jsx)("img",{src:e,alt:"renter picture"})]})]})}},6131:function(n,e,t){t.r(e),t.d(e,{default:function(){return F}});var r,i,a,s,o,c,d,p,u,l,x,h,f=t(168),g=t(4165),m=t(5861),v=t(885),Z=t(2791),b=t(6871),j=t(7691),w=t.p+"static/media/profilepage.9accf1ad4c78c954c56b.jpg",y=t(5073),k=t(5920),P=t(4448),C=t(6599),I=t(8179),U=t(184),E=j.ZP.div(r||(r=(0,f.Z)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 220px;\n\n  .spinner {\n    height: 80vh;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),S=j.ZP.div(i||(i=(0,f.Z)([""]))),_=j.ZP.div(a||(a=(0,f.Z)(["\n  height: 160px;\n  position: relative;\n\n  h2 {\n    position: absolute;\n    top: 50px;\n    left: 20px;\n    font-size: 35px;\n    font-weight: 900;\n    text-transform: capitalize;\n    color: #242526;\n  }\n"]))),z=j.ZP.img(s||(s=(0,f.Z)(["\n  height: 160px;\n  width: 100%;\n  object-fit: cover;\n  opacity: 0.3;\n"]))),N=j.ZP.div(o||(o=(0,f.Z)(["\n  display: flex;\n  max-width: 1300px;\n  margin: 0 auto;\n  align-items: flex-start;\n\n  @media screen and (max-width: 700px) {\n    flex-direction: column-reverse;\n  }\n\n  @media screen and (max-width: 1300px) {\n    gap: 100px;\n  }\n"]))),O=j.ZP.div(c||(c=(0,f.Z)(["\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n"]))),M=j.ZP.div(d||(d=(0,f.Z)(["\n  flex: 0.3;\n  margin: 50px auto;\n  width: 80%;\n\n  @media screen and (max-width: 700px) {\n    width: 70%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n\n  @media screen and (min-width: 1300px) {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),T=j.ZP.div(p||(p=(0,f.Z)(["\n  flex: 0.7;\n"]))),D=j.ZP.div(u||(u=(0,f.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: 15px;\n"]))),R=j.ZP.h2(l||(l=(0,f.Z)(["\n  padding: 19px 41px;\n\n  @media screen and (max-width: 700px) {\n    margin-bottom: 15px;\n  }\n"]))),A=j.ZP.img(x||(x=(0,f.Z)(["\n  width: 70%;\n  height: 240px;\n  border-radius: 10px;\n  margin-bottom: 10px;\n"]))),J=j.ZP.button(h||(h=(0,f.Z)(["\n  padding: 10px 25px;\n  width: 70%;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  background: transparent;\n  border-radius: 5px;\n  border: 1px solid;\n  transition: background 0.5s ease-in-out;\n\n  :hover {\n    background-color: #dadce1;\n  }\n"]))),F=function(){var n=(0,Z.useContext)(C.p),e=n.openChat,t=n.setOpenChat,r=(0,Z.useContext)(I.E).user,i=(0,Z.useState)(!1),a=(0,v.Z)(i,2),s=a[0],o=a[1],c=(0,Z.useState)(),d=(0,v.Z)(c,2),p=d[0],u=d[1],l=(0,Z.useState)([]),x=(0,v.Z)(l,2),h=x[0],f=x[1],j=(0,b.UO)().id;return(0,Z.useEffect)((function(){try{o(!0);var n=function(){var n=(0,m.Z)((0,g.Z)().mark((function n(){var e,t,r,i,a;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://laghata-app.herokuapp.com","/api/renter-listing/").concat(j));case 2:return e=n.sent,n.next=5,e.json();case 5:return t=n.sent,n.next=8,fetch("".concat("https://laghata-app.herokuapp.com","/api/user/").concat(j));case 8:return r=n.sent,n.next=11,r.json();case 11:i=n.sent,t.data&&i.data?(u(t.data),a=[i.data],f(a),o(!1)):o(!1);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}catch(e){console.log(e.stack),o(!1)}}),[j]),(0,U.jsx)(E,{children:s?(0,U.jsx)(P.Z,{}):(0,U.jsx)(U.Fragment,{children:p&&h&&!s&&(0,U.jsxs)(S,{children:[(0,U.jsxs)(_,{children:[(0,U.jsx)(z,{src:w,alt:"banner"}),(0,U.jsx)("h2",{children:h[0].username})]}),(0,U.jsxs)(N,{children:[(0,U.jsxs)(T,{children:[(0,U.jsxs)(R,{children:[p.length," open listing"]}),(0,U.jsx)(D,{children:p.map((function(n){return(0,U.jsx)(y.Z,{listing:n,renters:h},n._id)}))})]}),(0,U.jsxs)(M,{children:[(0,U.jsx)(A,{src:h[0].picture}),(0,U.jsxs)(J,{onClick:function(){r?t(!0):navigate("/login")},children:["Contact ",h[0].username]})]})]}),r&&(null===r||void 0===r?void 0:r._id)!==h[0]._id&&(0,U.jsx)(O,{children:(0,U.jsx)(k.Z,{picture:h[0].picture,renterUsername:h[0].username,renterId:h[0]._id,openChat:e,setOpenChat:t,currentUserName:null===r||void 0===r?void 0:r.username,currentUserPicture:null===r||void 0===r?void 0:r.picture,currentUserId:null===r||void 0===r?void 0:r._id})})]})})})}}}]);
//# sourceMappingURL=880.9d85610c.chunk.js.map